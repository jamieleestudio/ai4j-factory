{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/lixiaofeng/IdeaProjects/github/ai4j-factory/ai4j-factory-ui/src/components/Sidebar.tsx"],"sourcesContent":["import { Plus, MessageSquare, Settings, Menu, X, Sun, Moon } from \"lucide-react\";\nimport clsx from \"clsx\";\nimport { useTheme } from \"next-themes\";\nimport { useEffect, useState } from \"react\";\n\ninterface SidebarProps {\n  isOpen: boolean;\n  setIsOpen: (isOpen: boolean) => void;\n}\n\nexport default function Sidebar({ isOpen, setIsOpen }: SidebarProps) {\n  const { theme, setTheme } = useTheme();\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  return (\n    <>\n      {/* Mobile Overlay */}\n      <div\n        className={clsx(\n          \"fixed inset-0 bg-black/50 z-20 md:hidden transition-opacity\",\n          isOpen ? \"opacity-100\" : \"opacity-0 pointer-events-none\"\n        )}\n        onClick={() => setIsOpen(false)}\n      />\n\n      <div\n        className={clsx(\n          \"fixed md:relative z-30 flex flex-col h-full bg-sidebar transition-all duration-300 ease-in-out\",\n          isOpen ? \"translate-x-0 w-[280px]\" : \"-translate-x-full md:translate-x-0 md:w-0 md:overflow-hidden\",\n          \"md:border-r-0\"\n        )}\n      >\n        <div className=\"p-4\">\n          <button \n             onClick={() => setIsOpen(false)}\n             className=\"md:hidden absolute top-4 right-4 text-gray-500 hover:text-foreground\"\n          >\n            <X size={24} />\n          </button>\n\n          <button className=\"flex items-center gap-3 w-full px-4 py-3 rounded-full bg-input-bg hover:bg-black/5 dark:hover:bg-white/5 transition-colors text-sm text-foreground mb-6 shadow-sm border border-transparent hover:border-input-border/50\">\n            <Plus size={18} className=\"text-gray-500\" />\n            <span className=\"font-medium\">New chat</span>\n          </button>\n\n          <div className=\"flex flex-col gap-1\">\n            <div className=\"text-xs font-medium text-gray-500 px-4 py-2 mb-1\">Recent</div>\n            {/* Dummy History Items */}\n            {[\"React Server Components\", \"Next.js 14 Features\", \"Tailwind CSS Grid\", \"AI Model Comparison\", \"System Architecture\"].map((item, i) => (\n              <button\n                key={i}\n                className=\"group flex items-center gap-3 px-4 py-2 text-sm text-foreground hover:bg-black/5 dark:hover:bg-white/5 rounded-full transition-colors truncate w-full text-left\"\n              >\n                <MessageSquare size={16} className=\"text-gray-500 group-hover:text-foreground transition-colors flex-shrink-0\" />\n                <span className=\"truncate opacity-90 group-hover:opacity-100\">{item}</span>\n              </button>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"mt-auto p-4 flex flex-col gap-2\">\n           <button \n            onClick={() => setTheme(theme === \"dark\" ? \"light\" : \"dark\")}\n            className=\"flex items-center gap-3 w-full px-4 py-2 text-sm text-foreground hover:bg-black/5 dark:hover:bg-white/5 rounded-full transition-colors\"\n          >\n            {mounted && theme === \"dark\" ? (\n                <Sun size={18} className=\"text-gray-500\" />\n            ) : (\n                <Moon size={18} className=\"text-gray-500\" />\n            )}\n            <span>{mounted && theme === \"dark\" ? \"Light mode\" : \"Dark mode\"}</span>\n          </button>\n          \n          <button className=\"flex items-center gap-3 w-full px-4 py-2 text-sm text-foreground hover:bg-black/5 dark:hover:bg-white/5 rounded-full transition-colors\">\n            <Settings size={18} className=\"text-gray-500\" />\n            <span>Settings</span>\n          </button>\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;;;;AAOe,SAAS,QAAQ,EAAE,MAAM,EAAE,SAAS,EAAgB;;IACjE,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAA,uSAAQ;IACpC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,0UAAQ,EAAC;IAEvC,IAAA,2UAAS;6BAAC;YACR,WAAW;QACb;4BAAG,EAAE;IAEL,qBACE;;0BAEE,8VAAC;gBACC,WAAW,IAAA,oMAAI,EACb,+DACA,SAAS,gBAAgB;gBAE3B,SAAS,IAAM,UAAU;;;;;;0BAG3B,8VAAC;gBACC,WAAW,IAAA,oMAAI,EACb,kGACA,SAAS,4BAA4B,gEACrC;;kCAGF,8VAAC;wBAAI,WAAU;;0CACb,8VAAC;gCACE,SAAS,IAAM,UAAU;gCACzB,WAAU;0CAEX,cAAA,8VAAC,wRAAC;oCAAC,MAAM;;;;;;;;;;;0CAGX,8VAAC;gCAAO,WAAU;;kDAChB,8VAAC,iSAAI;wCAAC,MAAM;wCAAI,WAAU;;;;;;kDAC1B,8VAAC;wCAAK,WAAU;kDAAc;;;;;;;;;;;;0CAGhC,8VAAC;gCAAI,WAAU;;kDACb,8VAAC;wCAAI,WAAU;kDAAmD;;;;;;oCAEjE;wCAAC;wCAA2B;wCAAuB;wCAAqB;wCAAuB;qCAAsB,CAAC,GAAG,CAAC,CAAC,MAAM,kBAChI,8VAAC;4CAEC,WAAU;;8DAEV,8VAAC,gUAAa;oDAAC,MAAM;oDAAI,WAAU;;;;;;8DACnC,8VAAC;oDAAK,WAAU;8DAA+C;;;;;;;2CAJ1D;;;;;;;;;;;;;;;;;kCAUb,8VAAC;wBAAI,WAAU;;0CACZ,8VAAC;gCACA,SAAS,IAAM,SAAS,UAAU,SAAS,UAAU;gCACrD,WAAU;;oCAET,WAAW,UAAU,uBAClB,8VAAC,8RAAG;wCAAC,MAAM;wCAAI,WAAU;;;;;6DAEzB,8VAAC,iSAAI;wCAAC,MAAM;wCAAI,WAAU;;;;;;kDAE9B,8VAAC;kDAAM,WAAW,UAAU,SAAS,eAAe;;;;;;;;;;;;0CAGtD,8VAAC;gCAAO,WAAU;;kDAChB,8VAAC,6SAAQ;wCAAC,MAAM;wCAAI,WAAU;;;;;;kDAC9B,8VAAC;kDAAK;;;;;;;;;;;;;;;;;;;;;;;;;;AAMlB;GA3EwB;;QACM,uSAAQ;;;KADd"}},
    {"offset": {"line": 232, "column": 0}, "map": {"version":3,"sources":["file:///Users/lixiaofeng/IdeaProjects/github/ai4j-factory/ai4j-factory-ui/src/components/ChatInput.tsx"],"sourcesContent":["import { SendHorizontal, Paperclip, Mic, Image as ImageIcon } from \"lucide-react\";\nimport { useState, useRef, useEffect } from \"react\";\nimport clsx from \"clsx\";\n\ninterface ChatInputProps {\n  onSend: (message: string) => void;\n  isLoading: boolean;\n}\n\nexport default function ChatInput({ onSend, isLoading }: ChatInputProps) {\n  const [input, setInput] = useState(\"\");\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  const handleSend = () => {\n    if (!input.trim() || isLoading) return;\n    onSend(input);\n    setInput(\"\");\n    if (textareaRef.current) {\n        textareaRef.current.style.height = 'auto';\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n  \n  const handleInput = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n      setInput(e.target.value);\n  }\n\n  useEffect(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n      textareaRef.current.style.height = `${Math.min(textareaRef.current.scrollHeight, 200)}px`;\n    }\n  }, [input]);\n\n  return (\n    <div className=\"relative w-full max-w-4xl mx-auto\">\n      <div className={clsx(\n        \"relative flex flex-col w-full bg-input-bg rounded-[24px] border border-transparent transition-all duration-200\",\n        \"focus-within:bg-white dark:focus-within:bg-[#28292A] focus-within:shadow-md dark:focus-within:shadow-lg focus-within:border-gray-200 dark:focus-within:border-gray-600/50\"\n      )}>\n        <textarea\n          ref={textareaRef}\n          value={input}\n          onChange={handleInput}\n          onKeyDown={handleKeyDown}\n          placeholder=\"Ask anything...\"\n          className=\"w-full max-h-[200px] py-4 px-6 bg-transparent border-0 focus:ring-0 resize-none outline-none text-foreground text-base placeholder-gray-500 overflow-y-auto\"\n          rows={1}\n          style={{ minHeight: '56px' }}\n        />\n        \n        <div className=\"flex justify-between items-center px-4 pb-3 pt-1\">\n            <div className=\"flex items-center gap-2\">\n                <button className=\"p-2 text-gray-500 hover:text-foreground hover:bg-black/5 dark:hover:bg-white/10 rounded-full transition-colors\" title=\"Attach file\">\n                    <Paperclip size={20} />\n                </button>\n                <button className=\"p-2 text-gray-500 hover:text-foreground hover:bg-black/5 dark:hover:bg-white/10 rounded-full transition-colors\" title=\"Upload image\">\n                    <ImageIcon size={20} />\n                </button>\n            </div>\n            \n            <div className=\"flex items-center gap-2\">\n                 <button \n                    onClick={handleSend}\n                    disabled={!input.trim() || isLoading}\n                    className={clsx(\n                        \"p-2 rounded-full transition-all duration-200 flex items-center justify-center\",\n                        input.trim() && !isLoading \n                            ? \"bg-foreground text-background hover:opacity-90\" \n                            : \"bg-transparent text-gray-400 cursor-not-allowed\"\n                    )}\n                 >\n                    {input.trim() ? <SendHorizontal size={20} /> : <Mic size={20} />}\n                </button>\n            </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;AAOe,SAAS,UAAU,EAAE,MAAM,EAAE,SAAS,EAAkB;;IACrE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,0UAAQ,EAAC;IACnC,MAAM,cAAc,IAAA,wUAAM,EAAsB;IAEhD,MAAM,aAAa;QACjB,IAAI,CAAC,MAAM,IAAI,MAAM,WAAW;QAChC,OAAO;QACP,SAAS;QACT,IAAI,YAAY,OAAO,EAAE;YACrB,YAAY,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG;QACvC;IACF;IAEA,MAAM,gBAAgB,CAAC;QACrB,IAAI,EAAE,GAAG,KAAK,WAAW,CAAC,EAAE,QAAQ,EAAE;YACpC,EAAE,cAAc;YAChB;QACF;IACF;IAEA,MAAM,cAAc,CAAC;QACjB,SAAS,EAAE,MAAM,CAAC,KAAK;IAC3B;IAEA,IAAA,2UAAS;+BAAC;YACR,IAAI,YAAY,OAAO,EAAE;gBACvB,YAAY,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG;gBACnC,YAAY,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,KAAK,GAAG,CAAC,YAAY,OAAO,CAAC,YAAY,EAAE,KAAK,EAAE,CAAC;YAC3F;QACF;8BAAG;QAAC;KAAM;IAEV,qBACE,8VAAC;QAAI,WAAU;kBACb,cAAA,8VAAC;YAAI,WAAW,IAAA,oMAAI,EAClB,kHACA;;8BAEA,8VAAC;oBACC,KAAK;oBACL,OAAO;oBACP,UAAU;oBACV,WAAW;oBACX,aAAY;oBACZ,WAAU;oBACV,MAAM;oBACN,OAAO;wBAAE,WAAW;oBAAO;;;;;;8BAG7B,8VAAC;oBAAI,WAAU;;sCACX,8VAAC;4BAAI,WAAU;;8CACX,8VAAC;oCAAO,WAAU;oCAAiH,OAAM;8CACrI,cAAA,8VAAC,gTAAS;wCAAC,MAAM;;;;;;;;;;;8CAErB,8VAAC;oCAAO,WAAU;oCAAiH,OAAM;8CACrI,cAAA,8VAAC,oSAAS;wCAAC,MAAM;;;;;;;;;;;;;;;;;sCAIzB,8VAAC;4BAAI,WAAU;sCACV,cAAA,8VAAC;gCACE,SAAS;gCACT,UAAU,CAAC,MAAM,IAAI,MAAM;gCAC3B,WAAW,IAAA,oMAAI,EACX,iFACA,MAAM,IAAI,MAAM,CAAC,YACX,mDACA;0CAGT,MAAM,IAAI,mBAAK,8VAAC,mUAAc;oCAAC,MAAM;;;;;yDAAS,8VAAC,8RAAG;oCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO9E;GA5EwB;KAAA"}},
    {"offset": {"line": 400, "column": 0}, "map": {"version":3,"sources":["file:///Users/lixiaofeng/IdeaProjects/github/ai4j-factory/ai4j-factory-ui/src/components/MessageList.tsx"],"sourcesContent":["import { Bot, User, Sparkles } from \"lucide-react\";\nimport clsx from \"clsx\";\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport { vscDarkPlus } from 'react-syntax-highlighter/dist/cjs/styles/prism';\nimport { useEffect, useRef } from \"react\";\n\ninterface Message {\n  role: string;\n  content: string;\n}\n\ninterface MessageListProps {\n  messages: Message[];\n  isLoading: boolean;\n}\n\nexport default function MessageList({ messages, isLoading }: MessageListProps) {\n  const bottomRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (bottomRef.current) {\n        bottomRef.current.scrollIntoView({ behavior: \"smooth\" });\n    }\n  }, [messages, isLoading]);\n\n  return (\n    <div className=\"flex-1 overflow-y-auto p-4 md:p-6 space-y-8 scrollbar-thin scrollbar-thumb-accent scrollbar-track-transparent\">\n      {messages.length === 0 && (\n          <div className=\"flex flex-col items-center justify-center h-full text-center opacity-50\">\n              <Sparkles size={48} className=\"mb-4 text-gray-400\" />\n              <h2 className=\"text-2xl font-semibold mb-2 text-foreground\">How can I help you today?</h2>\n          </div>\n      )}\n\n      {messages.map((msg, idx) => (\n        <div\n          key={idx}\n          className={clsx(\n            \"flex w-full max-w-4xl mx-auto\",\n            msg.role === \"user\" ? \"justify-end\" : \"justify-start\"\n          )}\n        >\n          {/* Content Column */}\n          <div className={clsx(\n              \"max-w-[85%]\",\n              msg.role === \"user\" ? \"text-right\" : \"text-left\"\n          )}>\n             <div className={clsx(\n               \"text-foreground text-base leading-7 font-light tracking-wide inline-block\",\n               msg.role === \"user\" \n                 ? \"whitespace-pre-wrap bg-gray-100 dark:bg-[#1E1F20] px-4 py-2 rounded-[20px] rounded-tr-sm\" \n                 : \"markdown-body w-full\" \n             )}>\n                {msg.role === \"user\" ? (\n                    msg.content\n                ) : (\n                    <ReactMarkdown\n                        remarkPlugins={[remarkGfm]}\n                        components={{\n                            code({node, inline, className, children, ...props}: any) {\n                                const match = /language-(\\w+)/.exec(className || '')\n                                return !inline && match ? (\n                                    <SyntaxHighlighter\n                                        {...props}\n                                        style={vscDarkPlus}\n                                        language={match[1]}\n                                        PreTag=\"div\"\n                                        className=\"rounded-md my-4\"\n                                    >\n                                        {String(children).replace(/\\n$/, '')}\n                                    </SyntaxHighlighter>\n                                ) : (\n                                    <code {...props} className={clsx(\"bg-gray-200 dark:bg-gray-800 rounded px-1 py-0.5 font-mono text-sm\", className)}>\n                                        {children}\n                                    </code>\n                                )\n                            },\n                            // Custom styling for other markdown elements\n                            p: ({children}) => <p className=\"mb-2 last:mb-0\">{children}</p>,\n                            ul: ({children}) => <ul className=\"list-disc pl-4 mb-2 space-y-1\">{children}</ul>,\n                            ol: ({children}) => <ol className=\"list-decimal pl-4 mb-2 space-y-1\">{children}</ol>,\n                            li: ({children}) => <li className=\"mb-1\">{children}</li>,\n                            a: ({children, href}) => <a href={href} className=\"text-blue-500 hover:underline\" target=\"_blank\" rel=\"noopener noreferrer\">{children}</a>,\n                            h1: ({children}) => <h1 className=\"text-2xl font-bold mb-2 mt-4 first:mt-0\">{children}</h1>,\n                            h2: ({children}) => <h2 className=\"text-xl font-bold mb-2 mt-3 first:mt-0\">{children}</h2>,\n                            h3: ({children}) => <h3 className=\"text-lg font-bold mb-2 mt-2 first:mt-0\">{children}</h3>,\n                            blockquote: ({children}) => <blockquote className=\"border-l-4 border-gray-300 pl-4 italic my-2\">{children}</blockquote>,\n                            table: ({children}) => <div className=\"overflow-x-auto my-4\"><table className=\"min-w-full divide-y divide-gray-300 dark:divide-gray-700 border border-gray-300 dark:border-gray-700\">{children}</table></div>,\n                            thead: ({children}) => <thead className=\"bg-gray-50 dark:bg-gray-800\">{children}</thead>,\n                            tbody: ({children}) => <tbody className=\"divide-y divide-gray-200 dark:divide-gray-800\">{children}</tbody>,\n                            tr: ({children}) => <tr>{children}</tr>,\n                            th: ({children}) => <th className=\"px-3 py-2 text-left text-sm font-semibold text-gray-900 dark:text-gray-100\">{children}</th>,\n                            td: ({children}) => <td className=\"px-3 py-2 text-sm text-gray-500 dark:text-gray-300\">{children}</td>,\n                        }}\n                    >\n                        {/* Pre-process content to ensure headers have spaces */}\n                        {msg.content.replace(/(^|\\n)(#{1,6})([^\\s#])/g, '$1$2 $3')}\n                    </ReactMarkdown>\n                )}\n             </div>\n          </div>\n        </div>\n      ))}\n      \n      {isLoading && (\n        <div className=\"flex w-full max-w-4xl mx-auto justify-start\">\n           <div className=\"flex-1 min-w-0 py-2\">\n                <div className=\"flex items-center gap-1\">\n                    <span className=\"w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full animate-bounce\"></span>\n                    <span className=\"w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full animate-bounce delay-75\"></span>\n                    <span className=\"w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full animate-bounce delay-150\"></span>\n                </div>\n           </div>\n        </div>\n      )}\n      \n      {/* Spacer for bottom input area */}\n      <div ref={bottomRef} className=\"h-4\" />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 720, "column": 0}, "map": {"version":3,"sources":["file:///Users/lixiaofeng/IdeaProjects/github/ai4j-factory/ai4j-factory-ui/src/components/ChatArea.tsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport { PanelLeft, ChevronDown } from \"lucide-react\";\nimport ChatInput from \"./ChatInput\";\nimport MessageList from \"./MessageList\";\n\ninterface ChatAreaProps {\n  isSidebarOpen: boolean;\n  toggleSidebar: () => void;\n}\n\nexport default function ChatArea({ isSidebarOpen, toggleSidebar }: ChatAreaProps) {\n  const [messages, setMessages] = useState<any[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const eventSourceRef = useRef<EventSource | null>(null);\n\n  const handleSendMessage = (content: string) => {\n    if (isLoading) return;\n\n    if (eventSourceRef.current) {\n        eventSourceRef.current.close();\n    }\n\n    // Add user message immediately\n    setMessages(prev => [...prev, { role: \"user\", content }]);\n    setIsLoading(true);\n\n    // Add initial AI message placeholder\n    setMessages(prev => [...prev, { role: \"ai\", content: \"\" }]);\n\n    // Use explicit backend URL to avoid Next.js proxy buffering in dev mode\n    const baseUrl = process.env.NEXT_PUBLIC_API_BASE || 'http://localhost:8080';\n    const url = `${baseUrl}/api/chat/stream?message=${encodeURIComponent(content)}`;\n    \n    const es = new EventSource(url, { withCredentials: true });\n    \n    es.onmessage = (e) => {\n        const text = e.data;\n        setMessages(prev => {\n            const newMsgs = [...prev];\n            const lastMsg = newMsgs[newMsgs.length - 1];\n            if (lastMsg && lastMsg.role === \"ai\") {\n                newMsgs[newMsgs.length - 1] = {\n                    ...lastMsg,\n                    content: lastMsg.content + text\n                };\n            }\n            return newMsgs;\n        });\n    };\n\n    es.onerror = (e) => {\n       // When the stream ends (server closes connection), onerror is often called.\n       // We can treat this as \"done\" or check if it was a real error.\n       // For simplicity, and matching user snippet logic, we close and stop loading.\n       es.close();\n       setIsLoading(false);\n       eventSourceRef.current = null;\n    };\n\n    es.onopen = () => {\n        // Connection opened\n    };\n\n    eventSourceRef.current = es;\n  };\n\n  useEffect(() => {\n    return () => {\n      if (eventSourceRef.current) {\n        eventSourceRef.current.close();\n      }\n    };\n  }, []);\n\n  return (\n    <div className=\"flex-1 flex flex-col h-full bg-background relative transition-all duration-300\">\n      {/* Header */}\n      <div className=\"sticky top-0 z-10 flex items-center justify-between p-4 bg-background/80 backdrop-blur-md\">\n        <div className=\"flex items-center gap-2\">\n            {!isSidebarOpen && (\n              <button\n                onClick={toggleSidebar}\n                className=\"p-2 text-gray-500 hover:text-foreground hover:bg-black/5 dark:hover:bg-white/10 rounded-full transition-colors\"\n              >\n                <PanelLeft size={20} />\n              </button>\n            )}\n            \n            <button className=\"flex items-center gap-2 px-3 py-2 hover:bg-black/5 dark:hover:bg-[#1E1F20] rounded-lg text-lg font-medium text-foreground transition-colors group\">\n                <span>Gemini 3 Pro</span>\n                <ChevronDown size={16} className=\"text-gray-500 group-hover:text-foreground\" />\n            </button>\n        </div>\n        \n        <div className=\"flex items-center gap-2\">\n            {/* Right side actions if needed */}\n        </div>\n      </div>\n\n      {/* Messages */}\n      <MessageList messages={messages} isLoading={isLoading} />\n\n      {/* Input Area - Fixed at bottom */}\n      <div className=\"w-full px-4 pb-6 pt-2 bg-gradient-to-t from-background via-background to-transparent\">\n        <ChatInput onSend={handleSendMessage} isLoading={isLoading} />\n        <div className=\"text-[11px] text-center text-gray-400 dark:text-gray-500 mt-3 font-light\">\n          Gemini may display inaccurate info, including about people, so double-check its responses.\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AA8BoB;;AA9BpB;AACA;AAAA;AACA;AACA;;;;;;;AAOe,SAAS,SAAS,EAAE,aAAa,EAAE,aAAa,EAAiB;;IAC9E,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,0UAAQ,EAAQ,EAAE;IAClD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,0UAAQ,EAAC;IAC3C,MAAM,iBAAiB,IAAA,wUAAM,EAAqB;IAElD,MAAM,oBAAoB,CAAC;QACzB,IAAI,WAAW;QAEf,IAAI,eAAe,OAAO,EAAE;YACxB,eAAe,OAAO,CAAC,KAAK;QAChC;QAEA,+BAA+B;QAC/B,YAAY,CAAA,OAAQ;mBAAI;gBAAM;oBAAE,MAAM;oBAAQ;gBAAQ;aAAE;QACxD,aAAa;QAEb,qCAAqC;QACrC,YAAY,CAAA,OAAQ;mBAAI;gBAAM;oBAAE,MAAM;oBAAM,SAAS;gBAAG;aAAE;QAE1D,wEAAwE;QACxE,MAAM,UAAU,4UAAO,CAAC,GAAG,CAAC,oBAAoB,IAAI;QACpD,MAAM,MAAM,GAAG,QAAQ,yBAAyB,EAAE,mBAAmB,UAAU;QAE/E,MAAM,KAAK,IAAI,YAAY,KAAK;YAAE,iBAAiB;QAAK;QAExD,GAAG,SAAS,GAAG,CAAC;YACZ,MAAM,OAAO,EAAE,IAAI;YACnB,YAAY,CAAA;gBACR,MAAM,UAAU;uBAAI;iBAAK;gBACzB,MAAM,UAAU,OAAO,CAAC,QAAQ,MAAM,GAAG,EAAE;gBAC3C,IAAI,WAAW,QAAQ,IAAI,KAAK,MAAM;oBAClC,OAAO,CAAC,QAAQ,MAAM,GAAG,EAAE,GAAG;wBAC1B,GAAG,OAAO;wBACV,SAAS,QAAQ,OAAO,GAAG;oBAC/B;gBACJ;gBACA,OAAO;YACX;QACJ;QAEA,GAAG,OAAO,GAAG,CAAC;YACX,4EAA4E;YAC5E,+DAA+D;YAC/D,8EAA8E;YAC9E,GAAG,KAAK;YACR,aAAa;YACb,eAAe,OAAO,GAAG;QAC5B;QAEA,GAAG,MAAM,GAAG;QACR,oBAAoB;QACxB;QAEA,eAAe,OAAO,GAAG;IAC3B;IAEA,IAAA,2UAAS;8BAAC;YACR;sCAAO;oBACL,IAAI,eAAe,OAAO,EAAE;wBAC1B,eAAe,OAAO,CAAC,KAAK;oBAC9B;gBACF;;QACF;6BAAG,EAAE;IAEL,qBACE,8VAAC;QAAI,WAAU;;0BAEb,8VAAC;gBAAI,WAAU;;kCACb,8VAAC;wBAAI,WAAU;;4BACV,CAAC,+BACA,8VAAC;gCACC,SAAS;gCACT,WAAU;0CAEV,cAAA,8VAAC,oTAAS;oCAAC,MAAM;;;;;;;;;;;0CAIrB,8VAAC;gCAAO,WAAU;;kDACd,8VAAC;kDAAK;;;;;;kDACN,8VAAC,0TAAW;wCAAC,MAAM;wCAAI,WAAU;;;;;;;;;;;;;;;;;;kCAIzC,8VAAC;wBAAI,WAAU;;;;;;;;;;;;0BAMjB,8VAAC,+IAAW;gBAAC,UAAU;gBAAU,WAAW;;;;;;0BAG5C,8VAAC;gBAAI,WAAU;;kCACb,8VAAC,6IAAS;wBAAC,QAAQ;wBAAmB,WAAW;;;;;;kCACjD,8VAAC;wBAAI,WAAU;kCAA2E;;;;;;;;;;;;;;;;;;AAMlG;GArGwB;KAAA"}},
    {"offset": {"line": 928, "column": 0}, "map": {"version":3,"sources":["file:///Users/lixiaofeng/IdeaProjects/github/ai4j-factory/ai4j-factory-ui/src/components/ChatInterface.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport Sidebar from \"./Sidebar\";\nimport ChatArea from \"./ChatArea\";\n\nexport default function ChatInterface() {\n  const [isSidebarOpen, setIsSidebarOpen] = useState(true);\n\n  return (\n    <div className=\"flex h-full w-full\">\n      <Sidebar isOpen={isSidebarOpen} setIsOpen={setIsSidebarOpen} />\n      <ChatArea isSidebarOpen={isSidebarOpen} toggleSidebar={() => setIsSidebarOpen(!isSidebarOpen)} />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACtB,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,0UAAQ,EAAC;IAEnD,qBACE,8VAAC;QAAI,WAAU;;0BACb,8VAAC,2IAAO;gBAAC,QAAQ;gBAAe,WAAW;;;;;;0BAC3C,8VAAC,4IAAQ;gBAAC,eAAe;gBAAe,eAAe,IAAM,iBAAiB,CAAC;;;;;;;;;;;;AAGrF;GATwB;KAAA"}}]
}